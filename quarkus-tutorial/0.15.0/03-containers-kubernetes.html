<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Native Deployment :: Quarkus Tutorial</title>
    <link rel="canonical" href="https://redhat-developer-demos.github.io/quarkus-tutorial/quarkus-tutorial/0.15.0/03-containers-kubernetes.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../../_/css/vendor/knative-tutorial-site.css">  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://redhat-developer-demos.github.io/quarkus-tutorial">Quarkus Tutorial</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>

    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Project</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>GitHub</strong></div>
            <a class="navbar-item" href="https://github.com/redhat-developer-demos/quarkus-tutorial">Quarkus Tutorial
              Repository</a>
            <a class="navbar-item" href="https://github.com/redhat-developer-demos/knative-tutorial/issues">Quarkus
              Tutorial Issue Tracker</a>
          </div>
        </div>
        <a class="navbar-item" href="https://twitter.com/rhdevelopers">
          <span class="icon">
            <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512">
              <path fill="#57aaee"
                d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z">
              </path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header><div class="main-wrapper">
    <div class="navigation-container" data-component="quarkus-tutorial" data-version="0.15.0">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Quarkus Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#download-tutorial-sources">Download Tutorial Sources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#kubernetes-cluster">Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#setup-work-folder">Work Folder</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="02-basics-fundas.html">2.Basics and Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-create-quarkus-app">Create Quarkus Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-ide-quarkus-project">Open Application in IDE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-build-run-quarkus-app">Build and Run Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-update-code">Update Code</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-call-svc">Invoke Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="03-containers-kubernetes.html">3. Cloud Native Deployment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#conk8s-prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#conk8s-build-container-app">Containerize Quarkus Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#conk8s-call-svc">Invoke Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#conk8s-call-svc">Deploy on Kubernetes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html">4. Quarkus Extensions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-intro">What are Extensions ?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-list-extensions">List Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-health-checks">Health Checks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-extensions">Add Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-rebuild-container-images">Rebuild Container Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-check-health-endpoint">Check Health Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-health-ep">Invoke Health Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-probes-to-k8s">Add Health Probes to Kubernetes Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-invoke-k8s-svc">Invoke Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">Frequently Asked Questions</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Quarkus Tutorial</span>
    <span class="version">0.15.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Quarkus Tutorial</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.15.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
    <main class="main">
        <div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Quarkus Tutorial</a></li>
    <li class="crumb"><a href="03-containers-kubernetes.html">3. Cloud Native Deployment</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-developer-demos/quarkus-tutorial/edit/master/documentation/modules/ROOT/pages/03-containers-kubernetes.adoc">Edit this Page</a></div>
</div>
        <article class="doc">
<h1>Cloud Native Deployment</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At the end of this chapter you will be able to :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Containerize the Quarkus Application</p>
</li>
<li>
<p>Build and run the Quarkus Application in Kubernetes</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conk8s-prerequisite"><a class="anchor" href="#conk8s-prerequisite"></a>Prerequisite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following checks ensure that each chapter exercises are done with the right environment settings.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_minikube"></a>Minikube</p>
</li>
<li>
<p><a id="tabset1_minishift"></a>Minishift</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_minikube">
<div class="ulist">
<ul>
<li>
<p>Set your local docker to use minikube docker daemon</p>
</li>
</ul>
</div>
<div id="minikube-set-env" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">eval $(minikube docker-env)</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#minikube-set-env"><i class="fa fa-copy"></i></button><br/>
<div class="ulist">
<ul>
<li>
<p>Kubernetes should be v1.12+</p>
</li>
</ul>
</div>
<div id="kubectl-version" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl version</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#kubectl-version"><i class="fa fa-copy"></i></button><br/>
</div>
<div class="tab-pane" aria-labelledby="tabset1_minishift">
<div class="ulist">
<ul>
<li>
<p>Set your local docker to use minishift docker daemon</p>
</li>
</ul>
</div>
<div id="minishift-set-env" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">eval $(minishift docker-env)</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#minishift-set-env"><i class="fa fa-copy"></i></button><br/>
<div class="ulist">
<ul>
<li>
<p>OpenShift CLI should be 3.11+</p>
</li>
</ul>
</div>
<div id="oc-version" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc version</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#oc-version"><i class="fa fa-copy"></i></button><br/>
<div class="ulist">
<ul>
<li>
<p>Make sure to be on <code>quarkustutorial</code> OpenShift project</p>
</li>
</ul>
</div>
<div id="right-openshift-project" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc project -q</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#right-openshift-project"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>If you are not on <code>quarkustutorial</code> project, then run following command to change to <code>quarkustutorial</code> project:</p>
</div>
<div id="change-to-openshift-project" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc project quarkustutorial</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#change-to-openshift-project"><i class="fa fa-copy"></i></button><br/>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conk8s-build-container-app"><a class="anchor" href="#conk8s-build-container-app"></a>Containerize Quarkus Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the tutorial&#8217;s <code>work</code> folder:</p>
</div>
<div id="conk8s-nav-to-work-folder" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd $TUTORIAL_HOME/work</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-nav-to-work-folder"><i class="fa fa-copy"></i></button><br/>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The instructions of this section assumes your project name to be <code>my-quarkus-project</code>
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_jvm-mode"></a>JVM mode</p>
</li>
<li>
<p><a id="tabset2_native-mode"></a>Native mode</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_jvm-mode">
<div id="conk8s-build-quarkus-jvm-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd my-quarkus-project &amp;&amp; \
./mvnw -DskipTests clean package</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-quarkus-jvm-app"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>After successful maven build, run the following command to build te container:</p>
</div>
<div id="conk8s-build-quarkus-jvm-app-container" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker build -f src/main/docker/Dockerfile.jvm -t example/my-quarkus-project-jvm .</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-quarkus-jvm-app-container"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>Run the container to start the application in jvm mode</p>
</div>
<div id="conk8s-build-run-jvm-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it --rm -p 8080:8080 example/my-quarkus-project-jvm</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-run-jvm-app"><i class="fa fa-copy"></i></button><br/>
</div>
<div class="tab-pane" aria-labelledby="tabset2_native-mode">
<div id="conk8s-build-quarkus-native-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd my-quarkus-project &amp;&amp; \
./mvnw -DskipTests clean package -Pnative -Dnative-image.docker-build=true <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-quarkus-native-app"><i class="fa fa-copy"></i></button><br/>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using the <code>-Dnative-image.docker-build=true</code> is very important as need a linux native binary what will be containerized.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Native compilation will take few minutes to complete.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After successful maven build, run the following command to build te container:</p>
</div>
<div id="conk8s-build-quarkus-native-app-container" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker build -f src/main/docker/Dockerfile.native -t example/my-quarkus-project-native .</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-quarkus-native-app-container"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>Run the container to start the application in native mode</p>
</div>
<div id="conk8s-build-run-native-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it --rm -p 8080:8080  example/my-quarkus-project-native</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-build-run-native-app"><i class="fa fa-copy"></i></button><br/>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Tests will fail on Windows as there is no graalvm support for windows, you can workaround it using <code>-DskipTests</code> option.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can <a href="#conk8s-call-svc">Invoke Service</a> to see a response like <code>hello</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conk8s-call-svc"><a class="anchor" href="#conk8s-call-svc"></a>Invoke Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The simple <code>hello</code> REST URI can be called via browser using <a href="http://localhost:8080" class="bare">http://localhost:8080</a> or using CLI like:</p>
</div>
<div id="basics-k8s-svc-call" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl localhost:8080/hello</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#basics-k8s-svc-call"><i class="fa fa-copy"></i></button><br/>
</div>
</div>
<div class="sect1">
<h2 id="conk8s-deploy-k8s-app"><a class="anchor" href="#conk8s-deploy-k8s-app"></a>Deploy Quarkus Application in Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copy the $TUTORIAL_HOME/templates/app.yaml to current Quarkus Application directory:</p>
</div>
<div id="conk8s-copy-k8s-app-template" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cp $TUTORIAL_HOME/templates/app.yaml .</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-copy-k8s-app-template"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>Edit the app.yaml and replace the following variables:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Variable</strong></th>
<th class="tableblock halign-center valign-top"><strong>Description</strong></th>
<th class="tableblock halign-center valign-top"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">$APP_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">The Kubernetes application name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">my-quarkus-app</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">$REGISTRY_USER_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">The container registry user name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">demo</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">$APP_IMAGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">The Quarkus container image name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">docker.io/demo/my-quarkus-project-native</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Set the variables in shell for further use in commands:</p>
</div>
<div id="conk8s-set-env" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export APP_NAME='my-quarkus-app' &amp;&amp; \
export REGISTRY_USER_NAME='demo' &amp;&amp; \
export APP_IMAGE="docker.io/$REGISTRY_USER_NAME/my-quarkus-project-native"</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-set-env"><i class="fa fa-copy"></i></button><br/>
<div class="sect2">
<h3 id="_tag_and_push_the_container_images"><a class="anchor" href="#_tag_and_push_the_container_images"></a>Tag and push the container images</h3>
<div class="paragraph">
<p>As we have already built the container images, we might need to build and push it to remote container registry. The remote images from the container registry will be used in kubernetes deployments:</p>
</div>
<div class="paragraph">
<p>With example variable settings as above, run the following commands to tag the images:</p>
</div>
<div id="conk8s-tag-images" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker tag example/my-quarkus-project-native $APP_IMAGE</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-tag-images"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>Once the container images have been tagged they can be pushed to remote container registry using the commands:</p>
</div>
<div id="conk8s-push-images" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker push $APP_IMAGE</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-push-images"><i class="fa fa-copy"></i></button><br/>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please update the <code>demo</code> registry user to match you container registry username
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_to_kubernetes"><a class="anchor" href="#_deploy_to_kubernetes"></a>Deploy to Kubernetes</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset3_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_kubectl">
<div id="conk8s-run-deploy-k8s-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f $TUTORIAL_HOME/work/my-quarkus-project/app.yaml</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-run-deploy-k8s-app"><i class="fa fa-copy"></i></button><br/>
</div>
<div class="tab-pane" aria-labelledby="tabset3_oc">
<div id="conk8s-oc-run-deploy-k8s-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f $TUTORIAL_HOME/work/my-quarkus-project/app.yaml</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-oc-run-deploy-k8s-app"><i class="fa fa-copy"></i></button><br/>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conk8s-invoke-k8s-svc"><a class="anchor" href="#conk8s-invoke-k8s-svc"></a>Invoke Kubernetes Service</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_kubectl"></a>kubectl</p>
</li>
<li>
<p><a id="tabset4_oc"></a>oc</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_kubectl">
<div id="conk8s-run-deploy-oc-app" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">SVC_URL=$(minikube ip):$(kubectl get svc $APP_NAME -o jsonpath='{.spec.ports[0].nodePort}')</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-run-deploy-oc-app"><i class="fa fa-copy"></i></button><br/>
</div>
<div class="tab-pane" aria-labelledby="tabset4_oc">
<div class="paragraph">
<p>With OpenShift we can create a route to make Quarkus application publicly accessible:</p>
</div>
<div id="conk8s-oc-run-expose-svc" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc expose service $APP_NAME</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-oc-run-expose-svc"><i class="fa fa-copy"></i></button><br/>
<div class="paragraph">
<p>Once the service is exposed we can use the following command to get the public url:</p>
</div>
<div id="conk8s-oc-run-get-route" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">SVC_URL=$(oc get routes $APP_NAME -o jsonpath='{.spec.host}')</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-oc-run-get-route"><i class="fa fa-copy"></i></button><br/>
</div>
</div>
</div>
<div class="paragraph">
<p>Now you can use the <code>SVC_URL</code> to call the service from the browser or via cli like:</p>
</div>
<div id="conk8s-call-k8s-svc" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl $SVC_URL/hello</code></pre>
</div>
</div>
<button class="copybtn" title="Copy to clipboard" data-clipboard-target="#conk8s-call-k8s-svc"><i class="fa fa-copy"></i></button><br/>
</div>
</div>
</div>
</article>
    </main>
</div><footer class="footer">
  <p>This content is brought to you by <a href="http://developers.redhat.com">Red Hat Developer</a> - Register today!.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<script src="../../_/js/vendor/clipboard.min.js"></script>
<script src="../../_/js/vendor/behavior.js"></script>
<script>
    var clipboard = new ClipboardJS('.copybtn');

    clipboard.on('success', function (e) {
        console.info('Text:', e);
        //e.clearSelection();        
    });

    clipboard.on('error', function (e) {
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
    });
</script>  </body>
</html>
