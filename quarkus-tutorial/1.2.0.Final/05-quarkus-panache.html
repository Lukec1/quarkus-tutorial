<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build Database Interactive Applications :: Quarkus Tutorial</title>
    <link rel="canonical" href="https://redhat-developer-demos.github.io/quarkus-tutorial/quarkus-tutorial/1.2.0.Final/05-quarkus-panache.html">
    <meta name="generator" content="Antora 2.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://redhat-developer-demos.github.io/quarkus-tutorial">Quarkus Tutorial</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container"  data-component="quarkus-tutorial"
  data-version="1.2.0.Final" >
  <aside class="navigation">
    <div class="panels">
      <div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Quarkus Tutorial</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#requirements">Required Tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="02-basics-fundas.html">2.Basics and Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-create-quarkus-app">Create Quarkus Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-ide-quarkus-project">Open Application in IDE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-build-run-quarkus-app">Build and Run Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-update-code">Update Code</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-call-svc">Invoke Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-basics-fundas.html#basics-testing">Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="02-basics-fundas.html#basics-logging">Configuring Logging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-basics-fundas.html#basics-call-svc-logging">Invoke Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="02-basics-fundas.html#basics-configuration">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-basics-fundas.html#basics-configuration-new-property">Add New Property</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-basics-fundas.html#basics-configuration-get-value">Get Configuration Value</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="02-basics-fundas.html#basics-call-configuration">Invoke Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="05-quarkus-panache.html">3. Hibernate with Quarkus</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#quarkusp-demo-overview">Demo Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="#quarkusp-fruitapp-dev">Build and Deploy</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkus-fruit-app-db">Deploy Mariadb</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkusp-access-db">Access Database </a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkuspdb-update-props">Configure Application properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkusp-create-fruit-entity">Create Fruit Entity</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkusp-edit-fruit-resource">Update Fruit Resource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quarkusp-fruits-finder">Finders</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html">4. Quarkus Extensions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-intro">What are Extensions ?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-list-extensions">List Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html#qext-rest-client">Rest Client</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-rest-client-extensions">Adding Rest Client extension</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-create-fruity-vice-pojo">Creating FruityVice POJO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-create-fruity-vice-service">Creating FruityVice Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-create-fruity-vice-service-config">Configuring FruityVice Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-create-fruity-vice-service-resclient">Using the RestClient</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-rest-client-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-fruity-rest-client">Invoke Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html#qext-fault-tolerance">Fault Tolerance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-fault-tolerance-extensions">Adding Fault Tolerance extension</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-retry-fruity-vice-service">Add Retry to Fruity Vice Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-fault-tolerance-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-fruity-fault-tolerance-retry">Invoke Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-fallback-fruity-vice-service">Add Fallback to Fruity Vice Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-fault-tolerance-fallback-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-fruity-fault-tolerance-fallback">Invoke Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-circuit-breaker-fruity-vice-service">Add Ciruict Breaker to Fruity Vice Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-circuit-breaker-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-fruity-fault-tolerance-circuit-breaker">Invoke Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-turn-on-network">Turn Network On</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html#qext-health-checks">Health Checks</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-extensions">Add Extension</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-health-check-default-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-health-ep">Invoke Health Endpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-custom-health-check">Customizing Health Checks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-health-check-custom-run-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-health-custom">Invoke Health Endpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-health-checks-kubernetes">Add Health Probes to Kubernetes Application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="04-quarkus-extensions.html#qext-jwt">Securing endpoints with JWT</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-add-jwt-extensions">Add Extension</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-configure-jwt-parameters">Configuring JWT parameters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-jwt-inject-claim">Injecting Claims</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-jwt-claim-quarkus-app-dev-mode">Run Quarkus Application in Development mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-jwt-claim">Invoke Endpoint</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-jwt-inject-rbac">Add RBAC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="04-quarkus-extensions.html#qext-call-jwt-rbac">Invoke Endpoint</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="06-quarkus-reactive.html">5. Reactive Programming with Quarkus</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="06-quarkus-reactive.html#quarkusrpb-demo-overview">Beer Demo Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-quarkus-reactive.html#quarkusrpb-buld-beer-reactive">Build Beer Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="06-quarkus-reactive.html#qext-reactive-beer-run-quarkus-app-dev-mode">Run Quarkus Application with Beer Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
  <div class="navigation-explore" data-panel="explore">
  <div class="context">
    <!-- Just a place holder to fill in  explorer for each context -->
  </div>
</div>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="index.html" class="home-link"></a>
  <nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">Quarkus Tutorial</a></li>
    <li class="crumb"><a href="05-quarkus-panache.html">3. Hibernate with Quarkus</a></li>
  </ul>
</nav>
</div>
<article class="doc">
<h1>Build Database Interactive Applications</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At the end of this chapter you will be able to :</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> What is Panache ?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> How to build a Hibernate application using Panache?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkusp-demo-overview"><a class="anchor" href="#quarkusp-demo-overview"></a>Demo Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll learn how easy and productive is Quarkus with Hibernate with Panache. For this, we&#8217;ll developer an application called "Fruits". It&#8217;s a simple CRUD REST API that handles information about fruits.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll use <a href="http://www.h2database.com">H2</a> as our backing database, but it&#8217;s very easy to use other database engines with Quarkus. As an exercise for later, we suggest you to try your favorite database engine with the documentation found <a href="https://quarkus.io/guides/datasource">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_build_fruit_resource"><a class="anchor" href="#_build_fruit_resource"></a>Build Fruit Resource</h4>
<div class="paragraph">
<p>The skeleton project to get started is the same you created at <a href="02-basics-fundas.html" class="page">Basics and Fundamentals</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the easier reference, we shall call the <code>fruits-app</code> project folder as $PROJECT_HOME
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="quarkusp-add-persistence-extensions"><a class="anchor" href="#quarkusp-add-persistence-extensions"></a>Add Extensions</h5>
<div id="qext-mvn-add-persistence-extensions" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextension="quarkus-resteasy-jsonb, quarkus-jdbc-h2, quarkus-hibernate-orm-panache, quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#qext-mvn-add-persistence-extensions"><i class="fa fa-clipboard"></i></button><br/>
</div>
<div class="sect4">
<h5 id="quarkusp-configure-props"><a class="anchor" href="#quarkusp-configure-props"></a>Edit the application.properties</h5>
<div class="paragraph">
<p>Add the following properties to <code>$PROJECT_HOME/src/main/resources/application.properties</code>:</p>
</div>
<div id="quarkuspdb-update-props" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-config hljs" data-lang="config">quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=username-default
quarkus.datasource.min-size=3
quarkus.datasource.max-size=13
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkuspdb-update-props"><i class="fa fa-clipboard"></i></button><br/>
</div>
<div class="sect4">
<h5 id="_test_database_connection"><a class="anchor" href="#_test_database_connection"></a>Test Database connection</h5>
<div class="paragraph">
<p>Let&#8217;s start Quarkus in <code>development</code> mode to verify the database connection works:</p>
</div>
<div id="quarkuspdb-test-dbconn" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-config hljs" data-lang="config">./mvnw compile quarkus:dev</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkuspdb-test-dbconn"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>If all went well then you should be seeing something like the following in the log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Listening for transport dt_socket at address: 5005
2020-02-18 09:57:23,827 WARN  [io.qua.agr.dep.AgroalProcessor] (build-23) Agroal dependency is present but no driver has been defined for the default datasource
2020-02-18 09:57:25,322 INFO  [io.quarkus] (main) devnexus 1.0-SNAPSHOT (running on Quarkus 1.2.0.Final) started in 2.287s. Listening on: http://0.0.0.0:8080
2020-02-18 09:57:25,324 INFO  [io.quarkus] (main) Profile dev activated. Live Coding activated.
2020-02-18 09:57:25,324 INFO  [io.quarkus] (main) Installed features: [agroal, cdi, hibernate-orm, hibernate-orm-panache, jdbc-h2, narayana-jta, resteasy, resteasy-jsonb, smallrye-openapi, swagger-ui]</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you would have noticed there is no database logs. That&#8217;s because we dont have any database related code yet:</p>
</div>
</div>
<div class="sect4">
<h5 id="quarkusp-create-fruit-entity"><a class="anchor" href="#quarkusp-create-fruit-entity"></a>Create Fruit Entity</h5>
<div class="paragraph">
<p>Add new Java file in <code>$PROJECT_HOME/src/main/java/com/example</code> called <code>Fruit</code> with the following contents:</p>
</div>
<div id="quarkusp-fruit-entity" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import javax.persistence.Entity;

@Entity
public class Fruit {

    public String name;

    public String season;

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-fruit-entity"><i class="fa fa-clipboard"></i></button><br/>
</div>
<div class="sect4">
<h5 id="quarkusp-edit-fruit-resource"><a class="anchor" href="#quarkusp-edit-fruit-resource"></a>Update Fruit Resource</h5>
<div class="paragraph">
<p>Edit the Java file <code>$PROJECT_HOME/src/main/java/com/example/FruitResource.java</code>, remove <code>hello()</code> method and add a new REST method to get all the available fruits:</p>
</div>
<div id="quarkusp-fruit-entity1" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits() {
        return Fruit.listAll();
    }

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-fruit-entity1"><i class="fa fa-clipboard"></i></button><br/>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Your IDE will show an errors in <code>FruitResource.java</code> as it does not have a method <code>listAll()</code> in <code>Fruit</code> entity class.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Do I need to add it ? The simple answer is <strong>NO</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="quarkusp-what-is-panache"><a class="anchor" href="#quarkusp-what-is-panache"></a>Make Fruit Entity a Panache Entity</h5>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>What is Panache ?</strong></p>
</div>
<div class="paragraph">
<p>Hibernate ORM is the de facto JPA implementation and offers you the full breadth of an Object Relational Mapper. It makes complex mappings possible, but it does not make simple and common mappings trivial. Hibernate ORM with Panache focuses on making your entities trivial and fun to write in Quarkus.</p>
</div>
<div class="paragraph">
<p>More info <a href="https://quarkus.io/guides/hibernate-orm-panache-guide">Panache Guide</a></p>
</div>
</div>
</div>
<div id="quarkusp-fruit-entity2" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import javax.persistence.Entity;
import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
public class Fruit extends PanacheEntity {

    public String name;
    public String season;

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-fruit-entity2"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>Making the <code>Fruit</code> entity as a <code>Panache Entity</code> will make it both Entity and DAO and ofcourse the error in the <code>FruitResource.java</code> disappears.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now access the Fruits API <a href="http://localhost:8080/fruit" class="bare">http://localhost:8080/fruit</a>. If all goes well you will see some Hibernate SQL statements in the log that will create the new table <code>Fruit</code> with columns from <code>Fruit.java</code> entity class.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You have accessed the application using <a href="http://localhost:8080/fruit" class="bare">http://localhost:8080/fruit</a>. If you want you can enable <code>Swagger</code> by adding the extension:</p>
</div>
<div id="qext-mvn-add-swagger-ui-extensions" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextension="openapi"</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#qext-mvn-add-swagger-ui-extensions"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>And then access the swagger UI using the url <a href="http://localhost:8080/swagger-ui" class="bare">http://localhost:8080/swagger-ui</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since we don&#8217;t have any fruits in the DB you would have got an empty response back.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a REST method to the <code>FruitResource.java</code> to save a 'Fruit':</p>
</div>
<div id="quarkusp-fruit-add-persist" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import java.util.List;

import javax.transaction.Transactional;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits() {
        return Fruit.listAll();
    }

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    @Transactional
    public Response newFruit(Fruit fruit) {
        fruit.id = null;
        fruit.persist();
        return Response.status(Status.CREATED).entity(fruit).build();
    }

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-fruit-add-persist"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>You can insert a new fruit by using the next <code>curl</code> command: <code>curl -vvv -d '{"name": "Banana", "season": "Summer"}' -H "Content-Type: application/json" POST <a href="http://localhost:8080/fruit" class="bare">http://localhost:8080/fruit</a></code></p>
</div>
<div class="paragraph">
<p>Or if you have the Swagger UI <a href="http://localhost:8080/swagger-ui" class="bare">http://localhost:8080/swagger-ui</a> enabled you can do it form there as well.</p>
</div>
<div class="paragraph">
<p>Try adding a fruit via the Swagger UI Post and try listing the available fruits. A good day scenario will return a JSON like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "name": "Banana",
    "season": "Summer"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The response may vary based on what fruit you added.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="quarkusp-fruits-finder"><a class="anchor" href="#quarkusp-fruits-finder"></a>Finders</h5>
<div class="paragraph">
<p>Cool! So far we did with some primitive methods lets explore some cool things that Panache offers.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s try to find all fruits by a season. To make the query return some data let us add some fruits to the DB.</p>
</div>
<div class="paragraph">
<p>Create the following <code>import.sql</code> file in <code>$PROJECT_HOME/src/main/resources</code>:</p>
</div>
<div id="quarkusp-add-fruits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Mango','Spring');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Strawberry','Spring');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Orange','Winter');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'GrapeFruit','Winter');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Blueberry','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Banana','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Plum','Summer');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Apple','Fall');
INSERT INTO Fruit(id,name,season) VALUES (nextval('hibernate_sequence'),'Grapes','Fall');</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-add-fruits"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>Update the <code>Fruit</code> entity with a finder method like</p>
</div>
<div id="quarkusp-find-fruits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import java.util.List;
import javax.persistence.Entity;
import io.quarkus.hibernate.orm.panache.PanacheEntity;

@Entity
public class Fruit extends PanacheEntity {

    public String name;
    public String season;

    public static List&lt;Fruit&gt; getAllFruitsForSeason(String season) {
        return find("season", season).list();
    }

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-find-fruits"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>Update <code>FruitResource</code> with a REST method to get fruits by season:</p>
</div>
<div id="quarkusp-get-find-fruits" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import java.util.List;

import javax.transaction.Transactional;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;

@Path("/fruit")
public class FruitResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Fruit&gt; fruits() {
        return Fruit.listAll();
    }

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/{season}")
    public List&lt;Fruit&gt; fruitsBySeason(@PathParam("season") String season) {
        return Fruit.getAllFruitsForSeason(season);
    }

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    @Transactional
    public Response newFruit(Fruit fruit) {
        fruit.id = null;
        fruit.persist();
        return Response.status(Status.CREATED).entity(fruit).build();
    }

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-get-find-fruits"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>To test finder use the Swagger UI <a href="http://localhost:8080/swagger-ui" class="bare">http://localhost:8080/swagger-ui</a>.</p>
</div>
<div class="paragraph">
<p>A finder for fruits for the <em>Summer</em> season should return a response like :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  {
    "id": 5,
    "name": "Blueberry",
    "season": "Summer"
  },
  {
    "id": 6,
    "name": "Banana",
    "season": "Summer"
  },
  {
    "id": 7,
    "name": "Plum",
    "season": "Summer"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="quarkusp-testing"><a class="anchor" href="#quarkusp-testing"></a>Testing Fruit Resource</h4>
<div class="paragraph">
<p>Let&#8217;s write a test to validate that inserting and finding methods works as expected.</p>
</div>
<div class="sect4">
<h5 id="quarkusp-testing-dep"><a class="anchor" href="#quarkusp-testing-dep"></a>Adding AssertJ Dependency</h5>
<div class="paragraph">
<p>To validate simple output messages RestAssured assertions mechanism is enough but in our experience, when start dealing with more complex assertions then things might become a bit more complex.
For this reason, we encourage you to start using <a href="https://assertj.github.io/doc/">AssertJ</a>.</p>
</div>
<div class="paragraph">
<p>Open <code>$PROJECT_HOME/pom.xml</code> and add the following dependencies in the <code>dependencies</code> section:</p>
</div>
<div id="quarkusp-register-assertj" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.assertj&lt;/groupId&gt;
    &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;
    &lt;version&gt;3.13.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-test-h2&lt;/artifactId&gt;
    &lt;version&gt;1.2.0.Final&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-register-assertj"><i class="fa fa-clipboard"></i></button><br/>
</div>
<div class="sect4">
<h5 id="quarkusp-write-persistence-test"><a class="anchor" href="#quarkusp-write-persistence-test"></a>Write Persistence Test</h5>
<div class="paragraph">
<p>Open the next class <code>$PROJECT_HOME/src/test/java/com/example/FruitResourceTest.java</code> and copy the next content:</p>
</div>
<div id="quarkusp-test-class" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example;

import static io.restassured.RestAssured.given;
import static org.assertj.core.api.Assertions.assertThat;

import java.util.List;

import org.junit.jupiter.api.MethodOrderer.OrderAnnotation;
import org.junit.jupiter.api.Order;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestMethodOrder;

import io.quarkus.test.common.QuarkusTestResource;
import io.quarkus.test.h2.H2DatabaseTestResource;
import io.quarkus.test.junit.QuarkusTest;

@QuarkusTest
@TestMethodOrder(OrderAnnotation.class)
@QuarkusTestResource(H2DatabaseTestResource.class)
public class FruitResourceTest {

    @Test
    @Order(1)
    public void testInsertFruit() {
        Fruit fruit = new Fruit();
        fruit.name = "Watermelon";
        fruit.season = "Summer";

        given()
          .contentType("application/json")
          .body(fruit)
          .when()
          .post("/fruit")
          .then()
          .assertThat()
          .statusCode(201);
    }

    @Test
    @Order(2)
    public void testFindFruitsBySeason() {
        final List&lt;Fruit&gt; fruits = given()
          .when()
          .get("/fruit/{season}", "Summer")
          .then()
          .assertThat()
          .statusCode(200)
          .extract()
          .body()
          .jsonPath()
          .getList(".", Fruit.class);

        assertThat(fruits)
            .extracting("name")
            .containsExactlyInAnyOrder("Banana", "Watermelon", "Plum", "Blueberry");
    }

}</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#quarkusp-test-class"><i class="fa fa-clipboard"></i></button><br/>
<div class="paragraph">
<p>When running this test, the application is started once, then all tests are executed, and finally, the application is stopped.
Although it is not mandatory, by default <a href="http://rest-assured.io/">RestAssured</a> project is used to test Rest endpoints but it is up to you to change that.</p>
</div>
<div class="paragraph">
<p>You can run the test either in IDE or by running Maven:</p>
</div>
<div id="basics-run-tests" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw clean compile test</code></pre>
</div>
</div>
<button class="copybtn float-right" title="Copy to clipboard" data-clipboard-target="#basics-run-tests"><i class="fa fa-clipboard"></i></button><br/>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer role="contentinfo">
  <div class="region region-rhd-footer">
    <div id="block-rhdfooter" class="rhd-footer">
      <nav class="rhd-footer-nav" aria-label="Secondary Navigation" role="navigation">
        <ul class="rhd-menu">
          <li class="menu-item menu-item--expanded">
            <h3 class="section-toggle">GitHub</h3>
            <ul class="rhd-menu">
              <li class="menu-item">
                <a href="https://github.com/redhat-developer-demos/quarkus-tutorial" title="Quarkus Tutorial">Quarkus
                  Tutorial</a>
              </li>
              <li class="menu-item">
                <a href="https://github.com/redhat-developer-demos/quarkus-tutorial/issues" title="Issue Tracker">Issue
                  Tracker</a>
              </li>
              <li class="menu-item">
                <a href="https://quarkus.io" title="Quarkus">Quarkus</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <div class="rhd-footer-sidebar">
        <p class="rhd-footer-sidebar-title">Red Hat Developer</p>
        <p class="rhd-footer-sidebar-subtitle">Build here. Go anywhere.</p>
        <p class="rhd-footer-sidebar-content">
          We serve the builders. The problem solvers who create careers with
          code.<br /><br /><a href="https://developer.redhat.com/register">Join us</a>
          if you’re a developer, software engineer, web designer, front-end
          designer, UX designer, computer scientist, architect, tester,
          product manager, project manager or team lead.
        </p>
        <ul class="rhd-footer-sidebar-social">
          <li>
            <a href="https://www.youtube.com/channel/UC7noUdfWp-ukXUlAsJnSm-Q" target="_blank"
              rel="noopener noreferrer"><svg class="svg-inline--fa fa-youtube fa-w-18" aria-hidden="true"
                data-prefix="fab" data-icon="youtube" role="img" xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 576 512" data-fa-i2svg="">
                <path fill="currentColor"
                  d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z">
                </path>
              </svg><!-- <i class="fab fa-youtube"></i> --></a>
          </li>
          <li>
            <a href="https://www.facebook.com/RedHatDeveloperProgram" target="_blank" rel="noopener noreferrer"><svg
                class="svg-inline--fa fa-facebook fa-w-14" aria-hidden="true" data-prefix="fab" data-icon="facebook"
                role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg="">
                <path fill="currentColor"
                  d="M448 56.7v398.5c0 13.7-11.1 24.7-24.7 24.7H309.1V306.5h58.2l8.7-67.6h-67v-43.2c0-19.6 5.4-32.9 33.5-32.9h35.8v-60.5c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9h-58.4v67.6h58.4V480H24.7C11.1 480 0 468.9 0 455.3V56.7C0 43.1 11.1 32 24.7 32h398.5c13.7 0 24.8 11.1 24.8 24.7z">
                </path>
              </svg><!-- <i class="fab fa-facebook"> </i> --></a>
          </li>
          <li>
            <a href="https://twitter.com/rhdevelopers" target="_blank" rel="noopener noreferrer"><svg
                class="svg-inline--fa fa-twitter fa-w-16" aria-hidden="true" data-prefix="fab" data-icon="twitter"
                role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                <path fill="currentColor"
                  d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z">
                </path>
              </svg><!-- <i class="fab fa-twitter"> </i> --></a>
          </li>
          <li>
            <a href="https://github.com/redhat-developer" target="_blank" rel="noopener noreferrer"><svg
                class="svg-inline--fa fa-github fa-w-16" aria-hidden="true" data-prefix="fab" data-icon="github"
                role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg="">
                <path fill="currentColor"
                  d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
                </path>
              </svg><!-- <i class="fab fa-github"> </i> --></a>
          </li>
        </ul>
        <a class="rhd-footer-sidebar-signup" href="https://developers.redhat.com/register">Sign me up ▸</a>
      </div>
    </div>
  </div>
</footer><script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>
